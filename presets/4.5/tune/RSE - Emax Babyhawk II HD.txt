#$ TITLE: RSE - TUNE - Emax Babyhawk II HD
#$ FIRMWARE_VERSION: 4.5
#$ CATEGORY: TUNE
#$ STATUS: COMMUNITY
#$ KEYWORDS: RSE, hyperion
#$ AUTHOR: hyperion

#$ PARSER: MARKED

#$ DESCRIPTION:
#$ DESCRIPTION: <img src="https://user-images.githubusercontent.com/19867640/174759844-ffd85f42-1f1c-42bf-9032-d9f96d4d9619.svg" width="90px" style="display: block; float: left; margin-right: 10px; margin-top: 20px"/>
#$ DESCRIPTION: <h1>Emax Babyhawk II HD settings for BF 4.5</h1>
#$ DESCRIPTION: <br>
#$ DESCRIPTION:
#$ DESCRIPTION: These are the craft-specific settings for the Emax Babyhawk II HD running Betaflight 4.5
#$ DESCRIPTION:
#$ DESCRIPTION: <br>
#$ DESCRIPTION:

#$ DISCUSSION: none


### Drone Specific
set craft_name = BABYHAWK
set pilot_name = CH

# resources
resource SERIAL_TX 5 NONE			# Turn off UART5 TX
resource SERIAL_RX 5 NONE			# Turn off UART5 RX
resource PINIO 2 C12				# Map PINIO 1 toggle to UART5 TX pad
resource PINIO 3 D02				# Map PINIO 2 toggle to UART5 RX pad

# timer

# dma

# feature
feature TELEMETRY
feature OSD

# serial
serial 1 1 115200 57600 0 115200		# DJI OSD on UART2
serial 2 128 115200 57600 0 2000000		# OpenLager on UART3
serial 3 64 115200 57600 0 115200		# ELRS RX on UART4

# motors
set motor_poles = 12
set motor_output_reordering = 3,2,1,0,4,5,6,7
set yaw_motors_reversed = ON			# Props out
set dshot_bidir = ON
set motor_pwm_protocol = DSHOT600
set dshot_idle_value = 550			# Static motor idle of 5.5% of max throttle
set dyn_idle_min_rpm = 43			# Dynamic Idle of 4300RPM

# power system
set bat_capacity = 650
set vbat_max_cell_voltage = 440
set vbat_min_cell_voltage = 320
set vbat_warning_cell_voltage = 340
set vbat_scale = 111
set ibata_scale = 176
set report_cell_voltage = ON

# sensors and I/O
set dyn_notch_count = 1
set dyn_notch_q = 500
set gyro_1_sensor_align = CW0			# Board is reversed
set acc_calibration = -10,0,-53,1
set pinio_box = 255,40,41,255

# GPS

# camera
set fpv_mix_degrees = 30			# FPV camera angle

# logging
set blackbox_device = SERIAL			# SPIFLASH (onboard), SDCARD, or SERIAL
set debug_mode = GYRO_SCALED			
set blackbox_mode = NORMAL			# 


### Base settings
#$ INCLUDE: presets/4.5/other/rse_base.txt

# Link Specific
set rssi_channel = 15				# ELRS has LQ on 15 and dB on 16, CRSF on 12
rxfail 15 s 1000				# Set RSSI/LQ to zero


### RC Link
# Use ExpressLRS 250Hz preset with HD Freestyle, serial RX, and singe cell voltage


### Tune
# UAV Micro preset with Master Multiplier set at 1.0

# master
set gyro_lpf1_static_hz = 350
set gyro_lpf2_static_hz = 700
set dyn_notch_count = 1
set dyn_notch_q = 500
set dyn_notch_min_hz = 125
set dyn_notch_max_hz = 850
set gyro_lpf1_dyn_min_hz = 350
set gyro_lpf1_dyn_max_hz = 700
set rc_smoothing_auto_factor = 40
set rc_smoothing_setpoint_cutoff = 40
set rc_smoothing_feedforward_cutoff = 40
set simplified_gyro_filter_multiplier = 140


### Profiles
# UAV Micro preset with Master Multiplier set at 1.0

profile 0

# profile 0
set dterm_lpf1_dyn_min_hz = 105
set dterm_lpf1_dyn_max_hz = 210
set dterm_lpf1_static_hz = 105
set dterm_lpf2_static_hz = 210
set yaw_lowpass_hz = 0
set d_pitch = 30
set d_roll = 27
set d_min_roll = 27
set d_min_pitch = 30
set thrust_linear = 20
set feedforward_averaging = 2_POINT
set feedforward_smooth_factor = 50
set dyn_idle_min_rpm = 32
set simplified_d_gain = 90
set simplified_dmax_gain = 0
set simplified_dterm_filter_multiplier = 140

# restore original profile selection
profile 0


### OSD
#$ INCLUDE: presets/4.5/other/osd_base.txt
#$ INCLUDE: presets/4.5/other/dji_wtf.txt


### Rateprofiles
#$ INCLUDE: presets/4.5/other/rateprofiles.txt

